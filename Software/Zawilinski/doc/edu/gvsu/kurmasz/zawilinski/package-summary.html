<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_102) on Wed Mar 29 11:43:44 EDT 2017 -->
<title>edu.gvsu.kurmasz.zawilinski</title>
<meta name="date" content="2017-03-29">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="edu.gvsu.kurmasz.zawilinski";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li><a href="../../../../edu/gvsu/kurmasz/zawilinski/mw/current/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?edu/gvsu/kurmasz/zawilinski/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;edu.gvsu.kurmasz.zawilinski</h1>
<div class="docSummary">
<div class="block"><code>Zawilinski</code> is a Java library designed specifically to simplify the extraction of
 data from Wiktionary entries;  more generally, it simplifies the process of loading
 and filtering MediaWiki XML dumps so that the resulting document object tree is of
 manageable size (i.e., small enough so that generating and accessing the object tree
 doesn't cause a typical desktop computer  to "thrash").</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/InflectionTemplateLoader.TemplateCallback.html" title="interface in edu.gvsu.kurmasz.zawilinski">InflectionTemplateLoader.TemplateCallback</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/PostFilter.html" title="interface in edu.gvsu.kurmasz.zawilinski">PostFilter</a></td>
<td class="colLast">
<div class="block">Classes that implement this interface determine which <code>Page</code>s and
 <code>Revisions</code> are removed by the post-filter.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/FilterWiktionaryByLanguage.html" title="class in edu.gvsu.kurmasz.zawilinski">FilterWiktionaryByLanguage</a></td>
<td class="colLast">
<div class="block">Program to filter the data for a given language from Wiktionary.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/FilterWiktionaryByLanguage.MyOptions.html" title="class in edu.gvsu.kurmasz.zawilinski">FilterWiktionaryByLanguage.MyOptions</a></td>
<td class="colLast">
<div class="block">Container for command-line options.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/FilterWiktionaryByTitle.html" title="class in edu.gvsu.kurmasz.zawilinski">FilterWiktionaryByTitle</a></td>
<td class="colLast">
<div class="block">Filter a MediaWiki dump for a list of specific articles.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/InflectionTemplateLoader.html" title="class in edu.gvsu.kurmasz.zawilinski">InflectionTemplateLoader</a></td>
<td class="colLast">
<div class="block">Load the raw inflection template strings from a filtered MediaWiki dump.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/InflectionTemplateLoader.MyOptions.html" title="class in edu.gvsu.kurmasz.zawilinski">InflectionTemplateLoader.MyOptions</a></td>
<td class="colLast">
<div class="block">Command-line parameters for this class</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/LanguagePrefilter.html" title="class in edu.gvsu.kurmasz.zawilinski">LanguagePrefilter</a></td>
<td class="colLast">
<div class="block">A pre-filter that only allows text through that is in the section for the specified language.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/MediaWikiLoader.html" title="class in edu.gvsu.kurmasz.zawilinski">MediaWikiLoader</a></td>
<td class="colLast">
<div class="block">Generate the DOM for a MediaWiki XML document.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/PageFilterListener.html" title="class in edu.gvsu.kurmasz.zawilinski">PageFilterListener</a></td>
<td class="colLast">
<div class="block">Handles events from unmarshaller.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/PostFilterByLanguage.html" title="class in edu.gvsu.kurmasz.zawilinski">PostFilterByLanguage</a></td>
<td class="colLast">
<div class="block">Keep only those pages that contain some data for the specified language and
 remove the trailing level 2 language header left by the prefilter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/PostFilteredMediaWikiLoader.html" title="class in edu.gvsu.kurmasz.zawilinski">PostFilteredMediaWikiLoader</a></td>
<td class="colLast">
<div class="block">Generates a DOM for a Wiktionary XML document that contains only elements for selected entries.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/PreFilteredMediaWikiLoader.html" title="class in edu.gvsu.kurmasz.zawilinski">PreFilteredMediaWikiLoader</a></td>
<td class="colLast">
<div class="block">Generate the DOM for a MediaWiki XML document from a filtered XML stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/TextPrefilter.html" title="class in edu.gvsu.kurmasz.zawilinski">TextPrefilter</a></td>
<td class="colLast">
<div class="block">This abstract class simplifies the writing SAX filters that
 examine and modify only the contents of MediaWiki <code>&lt;text&gt;</code> tags.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/TextSizePrefilter.html" title="class in edu.gvsu.kurmasz.zawilinski">TextSizePrefilter</a></td>
<td class="colLast">
<div class="block">A <a href="../../../../edu/gvsu/kurmasz/zawilinski/TextPrefilter.html" title="class in edu.gvsu.kurmasz.zawilinski"><code>TextPrefilter</code></a> that limits the number of characters allowed in a given MediaWiki
 &lt;text&gt; element.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/Util.html" title="class in edu.gvsu.kurmasz.zawilinski">Util</a></td>
<td class="colLast">
<div class="block">Utilities to simplify the reading and writing of XML documents as well as
 navigating <code>MediaWikiType</code> objects.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/WiktionaryWriter.html" title="class in edu.gvsu.kurmasz.zawilinski">WiktionaryWriter</a></td>
<td class="colLast">
<div class="block">Writes an XML object tree as an XML file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/Zawilinski.html" title="class in edu.gvsu.kurmasz.zawilinski">Zawilinski</a></td>
<td class="colLast">
<div class="block">Logging levels and <a href="../../../../edu/gvsu/kurmasz/zawilinski/Zawilinski.html#main-java.lang.String:A-"><code>Zawilinski.main(String[])</code></a></div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../edu/gvsu/kurmasz/zawilinski/MediaWikiLoader.XMLConfigurationException.html" title="class in edu.gvsu.kurmasz.zawilinski">MediaWikiLoader.XMLConfigurationException</a></td>
<td class="colLast">
<div class="block">Exception describing a problem with the XML software setup.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package edu.gvsu.kurmasz.zawilinski Description">Package edu.gvsu.kurmasz.zawilinski Description</h2>
<div class="block"><code>Zawilinski</code> is a Java library designed specifically to simplify the extraction of
 data from Wiktionary entries;  more generally, it simplifies the process of loading
 and filtering MediaWiki XML dumps so that the resulting document object tree is of
 manageable size (i.e., small enough so that generating and accessing the object tree
 doesn't cause a typical desktop computer  to "thrash").

 <h2>Why do I need Zawilinski?</h2>

 <p>Wiktionary and Wikipedia make their data available for study by publishing very
 large (tens of gigabytes) XML files.  There are two basic approaches for loading
 XML files: stream parsers
 and tree-based parsers.  Stream parsers (e.g., Simple API for XML -- SAX)
 are efficient; however, writing this type of filter is time consuming and difficult because
 the programmer has to explicitly keep track of the current position in the XML parse tree
 and often must write code to buffer previous XML events.</p>

 Tree-based parsers (e.g., Document Object Model -- DOM) load the
 entire XML document into an object tree.  Writing code to access data in
 the object tree is much easier than handling XML events generated by a stream parser; however,
 a document's object tree is typically 2 to 10 times the
 size of the document itself.  Thus, it is impractical, if not
 impossible, to load an entire Wikipedia or Wiktionary XML file into
 an object tree.  In fact, as a result of vandalism, there are a few Wiktionary articles
 that are themselves too large to be loaded into an object tree.

 <h2>How does it work?</h2>

 <p>The Zawilinksi library combines the efficiency of a stream-based (i.e., SAX) parser with
 the simplicity of a tree-based (i.e., DOM parser).  It processes documents first with a SAX
 parser, then a DOM parser.  Users can place filters on both parsers.  The two sets of filters
 then work together to remove unnecessary data as soon
 as practical (by which we mean "easy to code"), thereby reducing both the
 workload of the DOM parser and the memory footprint of the resulting
 object tree.  (Of course, this is only helpful when the desired analysis
 requires a sufficiently small subset of the XML data.)</p>

 <p>Zawilinski is based on three key observations:</p>

 <ol>

  <li>It is not exceptionally difficult to write a SAX filter to filter an article's text.
  (More generally, it is not difficult to write a SAX filter for the content of a  "leaf" node
  in an XML parse tree.)

 <li> It is very difficult to write a SAX filter that removes entire articles.  (Removing an
  entire article at the stream parser level requires buffering the opening <code>&lt;article&gt;</code> element as well as all
  events that occur between the start of the article and the point at which the filter determines whether to keep
  the article.)</li>

 <li>It is not difficult to write a DOM filter that removes entire articles.  DOM filters have access to the entire
 article, including meta-data. In addition, removing the entire article entails removing only the articles root
 node from the document object tree.

 <li>The vast majority of the data in a Wikitionary or Wikipedia XML dump is the article text (i.e.,
 the content of the <code>&lt;text&gt;</code> element).</li>

 </ol>

 <p>Zawilinski first applies filters (called "pre-filters") to the SAX parser to remove most of the article content
 unrelated to the research question.  It then applies filters (called "post-filters") to the DOM parser  to remove
 the entire article from the object tree.  The pre-filters remove the majority of the unnecessary data,
 thereby significantly reducing the DOM parser's workload and memory requirements. The post-filters then
 remove the rest of the article.  Consequently, the DOM parser avoids building large object sub-trees that will
 soon be discarded, and the programmer avoids having to explicitly buffer XML events to remove articles at the
 SAX-processing stage.</p>

 <h3>Example</h3>

 <p>Here is how we use Zawilinski to support our study of Polish inflection data in Wiktionary:</p>

 <p>The <a href="http://en.wiktionary.org">English Wiktionary</a> contains English-language descriptions of words
 in many different languages.  Each article may contain sections for several different languages.  For example,
 the article for "pies" contains an English section discussing the plural of the word "pie" and a Polish section
 discussing the Polish word "pies", which means "dog".  For our study of Polish inflection data in Wiktionary,
 we are interested in only the Polish section of articles.  We are not interested in any articles that do not have a
 Polish section.</p>

 <p>To filter a Wiktionary dump for the data relevant to our study, we defined two pre-filters and one
 post-filter:</p>

 <dl>
    <dt>Language Pre-filter</dt>
    <dd>
       The language pre-filter retains only the Polish section of an article.  Specifically,
       it dumps all article text until it encounters the substring "<code>==Polish==</code>".  It then retains all article
       data until it encounters the headerContent for the next language section (e.g., "<code>==Spanish==</code>").
    </dd>

    <dt>Size Pre-filter</dt>
    <dd>The size pre-filter retains only the first few megabytes of article text. (Several vandalized
    articles in Wiktionary's history contain a few hundred million expletives.  The DOM parser can't handle
    that much text.) </dd>

    <dt>Language Post-filter</dt>
    <dd>The language pre-filter removes all text outside the Polish section.  Thus,
    articles without a Polish section contain
    no text when they reach the post-filter.  The language post-filter simply removes all articles with no article
    text from the object tree.  (Of course, this filter assumes that the language filter has been applied.)</dd>
    </dl>

 Notice that the DOM parser still builds object sub-trees for articles that don't contain Polish data.  However,
 those sub-trees are very small compared to the object sub-tree for an unfiltered article.  Similarly,
 the size pre-filter prevents vandalized articles from causing "Out of Memory" errors.

 <h2>Using Zawilinski</h2>

 <code>Zawilinski</code> comes with several stand-alone filter programs; or,
 users can use it as a library to support their custom filters.

 <h3>Included programs</h3>

 <ul>
 <li><code>FilterWiktionaryByLanguage</code>: Filter a Wiktionary XML dump to retain only
 those pages or revisions that contain information for a specified language.
 Run <code>java -jar Zawilinski.jar --help</code> for details.</li>
 </ul>

 <h3>Customizing filters</h3>

 We designed Zawilinski primarily to support the extraction and analysis of grammar data from Wiktionary entries.
 To use Zawilinski for a different study, users need only:

 <ol>
  <li> Write pre-filter (not always necessary)
  <li> Write post-filter
  <li> Write code to examine the remaining entries
 </ol>

  <dl>
   <dt><b>Write pre-filter</b>:</dt>
   <dd>  The pre-filter can be any implementation of
        <a href="http://docs.oracle.com/javase/6/docs/api/org/xml/sax/XMLFilter.html"><code>XMLFilter</code></a>
        and can modify the XML stream any way it likes (it is not limited to filtering text); however,
        as explained earlier, writing a filter for a SAX parser can be very difficult.

       <p>
       We provide the abstract class <a href="../../../../edu/gvsu/kurmasz/zawilinski/TextPrefilter.html" title="class in edu.gvsu.kurmasz.zawilinski"><code>TextPrefilter</code></a> to simplify the process
       of filtering article text.  A subclass of <code>TextPrefilter</code> must define
       <a href="../../../../edu/gvsu/kurmasz/zawilinski/TextPrefilter.html#handleTextElementCharacters-char:A-int-int-"><code>TextPrefilter.handleTextElementCharacters(char[], int, int)</code></a>.
       This method examines the characters in the array passed to it, then calls
       <a href="../../../../edu/gvsu/kurmasz/zawilinski/TextPrefilter.html#sendCharacters-char:A-int-int-"><code>TextPrefilter.sendCharacters(char[], int, int)</code></a> with
       those characters that are to pass through the filter. (See <a href="../../../../edu/gvsu/kurmasz/zawilinski/TextPrefilter.html" title="class in edu.gvsu.kurmasz.zawilinski"><code>TextPrefilter</code></a>
       for details.)  SAX may pass the article text to the filter over the course of several events.  Thus,
       each call to <code>handleTextElementCharacters</code> may contain only part of the article text.</p>

       <p>It is not always necessary to write a pre-filter.  If the articles of interest are small enough and few
       enough, then using the <a href="../../../../edu/gvsu/kurmasz/zawilinski/TextSizePrefilter.html" title="class in edu.gvsu.kurmasz.zawilinski"><code>TextSizePrefilter</code></a> as the only pre-filter will be
       sufficient.</p>
 </dd>

   <dt><b>Write post-filter</b>:</dt>
   <dd>Post-filters decide whether to retain or discard the document object sub-tree for a particular article or
   revision.
   (Each article may have many revisions.)
       A post-filter is an implementation of the <a href="../../../../edu/gvsu/kurmasz/zawilinski/PostFilter.html" title="interface in edu.gvsu.kurmasz.zawilinski"><code>PostFilter</code></a> interface.
       This interface defines two methods: <code>keepPage</code> and <code>keepRevision</code>.  Writing these methods requires
       the programmer to know the <a href="doc-files/mediaWikiImportSchema.png">MediaWiki XML Schema</a> and the
       Java classes that correspond to each element in the schema.
      (See the <a href="../../../../edu/gvsu/kurmasz/zawilinski/mw/current/package-summary.html"><code>edu.gvsu.kurmasz.zawilinski.mw.current</code></a> package for details.}
    </dd>

    <dt><b>Analyze remaining entries</b>:</dt>
    <dd>
       Zawilinski produces a object tree that can then be examined as desired.
    </dd>
 </dl>


 <h2> Other Tips </h2>
 <h3> Obtaining dumps </h3>
 <p>The English Wiktionary dumps can be found at <a href="http://dumps.wikimedia.org/enwiktionary/"> http://dumps.wikimedia.org/enwiktionary/</a>.
 Clicking on a date takes you to a web page that describes the different files available.  Clicking on
 <a href="http://dumps.wikimedia.org/enwiktionary/latest/">latest</a> takes you to a list of files.
 We have tended to use one of two files:</p>
 <ul>
   <li><code>pages-meta-history.xml.(7z|bz2)</code>: All pages with complete edit history
    <li><code>pages-articles.xml.bz2</code>: Current versions of article content.
 </ul>

 <p>You can download these files by simply clicking on the link on the web page; but, we have found it
 more convenient to use <code>curl</code>:</p>

 <p><code>curl http://dumps.wikimedia.org/enwiktionary/<em>DATE</em>/enwiktionary-<em>DATE</em>-pages-meta-history.xml.bz2 &lt; <em>LOCAL_NAME</em>.xml.bz2</code></p>

 <p>Where <em>DATE</em> is the date of the dump in <code>YYYYMMDD</code> format, and <em>LOCAL_NAME</em> is the name
 you want the file to have locally.</p></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li><a href="../../../../edu/gvsu/kurmasz/zawilinski/mw/current/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?edu/gvsu/kurmasz/zawilinski/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
