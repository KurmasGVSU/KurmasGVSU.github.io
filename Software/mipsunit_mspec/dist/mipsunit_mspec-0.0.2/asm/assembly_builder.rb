# Builds MIPSUnit::MSpec::Assembly



class AssemblyBuilder

  CURDIR = File.dirname(__FILE__)

  DEFAULT_TARGET="lib/mipsunit/mspec/assembly.rb"

  def self.add_file(varname, filename, output)

    # all file names are assumed to be given with respect to the directory that contains this file
    filename = "#{CURDIR}/#{filename}"

    output.puts "#{varname}=<<END_OF_STRING"
    output.puts File.read(filename)
    output.puts "END_OF_STRING"
    output.puts
    output.puts

  end

  def self.build(output)

    output.puts HEADER
    add_file("FAIL", "fail.asm", output)

    add_file("ALL_TESTS_PASS", "all_tests_pass.asm", output)

    # print footer
    output.puts FOOTER
  end


  HEADER = <<END_OF_STRING
#--
# DO NOT EDIT!!!!!
# This class is auto-generated by assembly_builder.rb
# DO NOT EDIT!!!!!
# (Also keep the #-- comment above to suppress RDoc processing)

module MIPSUnit
  module MSpec
    class Assembly
END_OF_STRING

  FOOTER = <<END_OF_STRING
    end # class
  end # modue MSpec
end # module MIPSUnit
END_OF_STRING

end
